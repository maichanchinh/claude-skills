package {{packageName}}

import android.content.Context
import android.content.Intent
import android.os.Bundle
import android.widget.Toast
import androidx.activity.ComponentActivity
import androidx.activity.compose.setContent
import androidx.activity.viewModels
import androidx.compose.runtime.collectAsState
import androidx.compose.runtime.getValue
import androidx.lifecycle.lifecycleScope
import dagger.hilt.android.AndroidEntryPoint
import kotlinx.coroutines.launch
import {{applicationPackage}}.screen.theme.AppTheme

/**
 * {{FeatureName}}Activity - Màn hình {{FeatureName}} với 100% Compose
 *
 * Sử dụng MVI pattern với:
 * - Screen không nhận ViewModel, chỉ nhận state và onAction callback
 * - ViewModel quản lý state và emit events
 * - Activity xử lý navigation và side effects
 */
@AndroidEntryPoint
class {{FeatureName}}Activity : ComponentActivity() {

    companion object {
        fun newInstance(context: Context) = 
            Intent(context, {{FeatureName}}Activity::class.java)
    }

    private val viewModel: {{FeatureName}}ViewModel by viewModels()

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)

        setContent {
            AppTheme {
                val uiState by viewModel.uiState.collectAsState()
                
                {{FeatureName}}Screen(
                    uiState = uiState,
                    onAction = { action -> viewModel.handleAction(action) }
                )
            }
        }

        // Collect events cho navigation và side effects
        lifecycleScope.launch {
            viewModel.events.collect { event ->
                handleEvent(event)
            }
        }
    }

    /**
     * Xử lý events từ ViewModel
     */
    private fun handleEvent(event: {{FeatureName}}Event) {
        when (event) {
            is {{FeatureName}}Event.Navigation.NavigateBack -> {
                finish()
            }
            
            is {{FeatureName}}Event.Message -> {
                Toast.makeText(this, event.message, Toast.LENGTH_SHORT).show()
            }
            
            is {{FeatureName}}Event.NavigateToDetail -> {
                // Start DetailActivity
                // val intent = DetailActivity.newInstance(this, event.id)
                // startActivity(intent)
            }
        }
    }
}
